<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Gerador IA Operacional 30D</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">

<style>
body{
 font-family:Inter;
 background:linear-gradient(120deg,#0f172a,#020617);
 color:#fff;
 margin:0;
}

.container{
 max-width:1100px;
 margin:auto;
 padding:40px 20px;
}

.header{
 display:flex;
 justify-content:space-between;
 align-items:center;
 margin-bottom:30px;
}

.badge{
 background:#10b981;
 padding:6px 12px;
 border-radius:20px;
 font-size:12px;
}

.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:20px;
}

.card{
 background:#0b1220;
 border-radius:20px;
 padding:25px;
 box-shadow:0 0 40px rgba(0,255,255,0.05);
}

input{
 width:100%;
 padding:12px;
 margin-bottom:12px;
 border-radius:10px;
 border:none;
 background:#111827;
 color:#fff;
}

button{
 padding:12px 18px;
 border-radius:10px;
 border:none;
 cursor:pointer;
 margin-right:10px;
}

.gerar{background:#22c55e;}
.copiar{background:#3b82f6;}

.resultado{
 min-height:260px;
 background:#020617;
 padding:15px;
 border-radius:12px;
}

.footer{
 margin-top:20px;
 font-size:13px;
 opacity:.7;
}
</style>
</head>

<body>

<div class="container">

<div class="header">
<h2>ü§ñ Gerador de Prompts ‚Äì IA Operacional 30D</h2>
<div class="badge">Exclusivo para alunos</div>
</div>

<div class="grid">

<div class="card">

<!-- FORM (substitua os 4 inputs atuais por estes) -->
<input id="nicho" placeholder="Nicho (ex: V√≠deos TikTok com IA / eBooks com IA)">
<input id="objetivo" placeholder="Objetivo operacional (ex: 30 roteiros curtos para 7 dias)">
<input id="publico" placeholder="P√∫blico (ex: iniciantes)">
<input id="formato" placeholder="Formato de sa√≠da (ex: tabela com hook, roteiro, CTA)">

<input id="nivel" placeholder="N√≠vel do usu√°rio (iniciante / intermedi√°rio / avan√ßado)">
<input id="papelIA" placeholder="Papel da IA (ex: Estrategista de conte√∫do TikTok para afiliados low ticket)">

<input id="tom" placeholder="Tom (opcional: direto / neutro / amig√°vel)">

<input id="restricoes" placeholder="Restri√ß√µes (ex: sem hype; baixo or√ßamento; passo a passo; 1¬™ semana)" style="margin-bottom:16px;">


<button class="gerar" onclick="gerar()">Gerar prompt</button>
<button class="copiar" onclick="copiar()">Copiar</button>

<div class="footer">
Sem promessas irreais. Sistema focado em execu√ß√£o.
</div>

</div>

<div class="card">
<div class="resultado" id="resultado">
Resultado aparecer√° aqui‚Ä¶
</div>
</div>

</div>
</div>

<script>
  // 1) URL do seu backend (novo Web Service do Render)
  const API_BASE = "https://prompt-api-7999.onrender.com"; // ex: "https://prompt-api-abc.onrender.com"

  // 2) Chave interna (MVP / teste). Depois vamos tirar isso do front.
  const INTERNAL_API_KEY = "ia30d_prompt_2026";

  async function gerar(){
    const nicho = document.getElementById("nicho").value.trim();
const objetivo = document.getElementById("objetivo").value.trim();
const publico = document.getElementById("publico").value.trim();
const formato = document.getElementById("formato").value.trim();
const nivel = document.getElementById("nivel").value.trim();
const restricoes = document.getElementById("restricoes").value.trim();
const papelIA = document.getElementById("papelIA").value.trim();

if (!nicho || !objetivo || !publico || !formato || !nivel || !restricoes || !papelIA) {
  saida.textContent =
    "Preencha: Nicho, Objetivo, P√∫blico, Formato, N√≠vel, Restri√ß√µes e Papel da IA.";
  return;
}


    try {
      const res = await fetch(API_BASE + "/api/prompt", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + INTERNAL_API_KEY
        },
       body: JSON.stringify({
  nicho: document.getElementById("nicho").value.trim(),
  objetivo: document.getElementById("objetivo").value.trim(),
  publico: document.getElementById("publico").value.trim(),
  formato: document.getElementById("formato").value.trim(),
  nivel: document.getElementById("nivel").value.trim(),
  restricoes: document.getElementById("restricoes").value.trim(),
  papelIA: document.getElementById("papelIA").value.trim(),
  tom: document.getElementById("tom").value.trim()
})
      });

      const data = await res.json();
      if (!res.ok) {
        resultado.innerText = "Erro: " + (data?.error || "falha no servidor");
        return;
      }

      resultado.innerText = data.prompt || "(sem resposta)";
    } catch (e) {
      resultado.innerText = "Erro de conex√£o com o servidor. Verifique API_BASE e o deploy no Render.";
    }
  }

  function copiar(){
    const texto = document.getElementById("resultado").innerText || "";
    if (!texto || texto.startsWith("Erro") || texto === "Gerando...") return;
    navigator.clipboard.writeText(texto);
    alert("Copiado!");
  }
</script>


</body>
</html>
